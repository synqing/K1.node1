%% K1.node1 Consolidated System Overview (Mermaid)
%% Export to PDF via docs/07-resources/ARCHITECTURE_DIAGRAM_EXPORT.md

flowchart TD
  %% Frontend
  subgraph FE[Frontend]
    A[Webapp (Vite)\nhttp://localhost:3003]
  end

  %% Backend (Local)
  subgraph BE[Backend]
    C[/API Proxy\n`/api` → 8800/]
    B[Orkes Service (Express)\nhttp://localhost:8800]
  end

  %% Orkes Cloud
  subgraph OC[Orkes Cloud]
    D[Conductor API\nhttps://developer.orkescloud.com/api]
  end

  %% Device
  subgraph DEV[Device]
    E[K1.node1 Firmware HTTP\nhttp://<device-ip>:3000]
    F[(WebSocket Telemetry)]
  end

  %% Data
  subgraph DATA[Data]
    G[(Database / Storage)]
  end

  %% Flows
  A -- HTTP GET/POST --> C
  C --> B
  B -- Conductor SDK --> D
  A -- WebSocket --> F
  A -- Device Control --> E
  B -- Persist/Fetch --> G
  A -- Read Settings --> G

  %% Notes
  classDef note fill:#fff5e6,stroke:#f5a623,color:#333,stroke-width:1px
  N1([Ports: Webapp=3003, Orkes Service=8800, Device HTTP=3000]):::note
  N2([Env: ORKES_SERVER_URL, ORKES_KEY_ID, ORKES_KEY_SECRET]):::note
  N3([Proxy: Vite dev server proxies `/api` → 8800]):::note
  N1 --- A
  N2 --- B
  N3 --- C

