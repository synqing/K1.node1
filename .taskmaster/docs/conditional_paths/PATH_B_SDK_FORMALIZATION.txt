# PATH B: C++ SDK FORMALIZATION

**Activation Trigger:** Decision Gate FAIL (Nov 13, Graph PoC did not meet criteria)
**Timeline:** Weeks 3-10 (Nov 14 - Jan 8)
**Ship Date:** January 29, 2026
**Resource:** 3 engineers (A: Firmware, B: SDK Architect, C: QA, D: Minimal UI)
**Status:** CONDITIONAL (parse only if PoC fails)
**Risk Mitigation:** Safer path, proven C++ patterns, lower technical risk

---

## RATIONALE: WHY PATH B ACTIVATES

If Graph PoC fails any of the 6 decision criteria:
- ✗ FPS impact > 2%
- ✗ Memory > 5KB per node
- ✗ Compilation unreliable (> 2s)
- ✗ Code quality < 80%
- ✗ Stability issues
- ✗ Device latency > 10ms

**Consequence:** Graph system approach not viable in 8-week timeline
**Strategic Response:** Formalize C++ SDK instead (10-week path)
**Revenue Impact:** $50-100M instead of $100-150M (lower upside, less risk)

---

## PHASE B: C++ SDK FORMALIZATION (WEEKS 3-10)

### Phase B.1: SDK Design & Documentation
**Assigned To:** Agent B (Graph System Architect → SDK Architect)
**Duration:** 16 hours
**Timeline:** Weeks 3-4
**Dependencies:**
- A.5 (Error registry needed for SDK error handling)
- PoC analysis (lessons learned from failed PoC)
**Parallel With:** D.1 (Agent D can start minimal UI prep)
**Blocks:**
- D.2 (Parameter editor design needs SDK API spec)
- D.3 (Webapp integration needs SDK documentation)
**Success Criteria:**
- Complete SDK API reference (100+ functions documented)
- Parameter schema defined (all 200+ parameters)
- 5+ example patterns (well-documented, easy to follow)
- Integration guide for external C++ developers
- Version management strategy documented
- Error handling patterns documented
- Performance guidelines for SDK users
**Test Strategy:**
- Documentation review (technical accuracy)
- Example pattern compilation (all examples work)
- Schema validation (all parameters defined)
- External developer testing (1-2 beta partners)
**Related Context:** See .taskmaster/docs/appendices/agent_b_graph_context.md

### Phase B.2: Parameter Editor UI Design
**Assigned To:** Agent B
**Duration:** 24 hours
**Timeline:** Weeks 4-6
**Dependencies:**
- D.1 (SDK API spec complete)
**Sequential With:** Must complete before D.2 & D.3
**Blocks:**
- D.2, D.3 (Webapp integration needs this)
**Success Criteria:**
- Parameter editor UI design complete (Figma mockups)
- All 200+ parameters have appropriate controls:
  - Sliders for continuous values
  - Color pickers for colors
  - Dropdowns for enums
  - Text fields for strings
- Real-time validation (show constraints)
- Parameter presets system
- Undo/redo for parameter changes
- Accessibility considered (keyboard nav, WCAG AA)
- Performance targets: parameter change reflected in < 500ms
**Test Strategy:**
- UI usability testing (team consensus)
- Accessibility audit (WCAG AA)
- Performance validation (change latency < 500ms)
- Parameter edge case testing (min/max/constraints)
**Related Context:** See .taskmaster/docs/appendices/agent_d_integration_context.md

### Phase B.3: Webapp SDK Integration
**Assigned To:** Agent D (Integration Engineer)
**Duration:** 16 hours
**Timeline:** Weeks 6-7
**Dependencies:**
- D.2 (Parameter editor design)
**Parallel With:** D.4 (Testing can start)
**Blocks:**
- D.4 (Integration testing needs working UI)
**Success Criteria:**
- Parameter editor integrated into webapp
- Real-time device communication working
  - Parameter changes sent to device
  - Device updates applied within 1 second
- Error handling + user feedback
  - Invalid parameters rejected with clear message
  - Device connection issues handled gracefully
  - Retry logic with exponential backoff
- Save/load parameter sets (JSON serialization)
- Parameter history / undo support
- Responsive design (mobile + desktop)
**Test Strategy:**
- E2E tests: parameter change → device update
- Integration: 100 parameter combinations
- Device communication: reliability testing (99.5% uptime)
- Error scenarios: device offline, invalid params, etc.
- UI responsiveness: parameter change latency < 1s
**Related Context:** See .taskmaster/docs/appendices/agent_d_integration_context.md

### Phase B.4: SDK Integration Testing & Validation
**Assigned To:** Agent C (QA/Validation Engineer)
**Duration:** 16 hours
**Timeline:** Weeks 7-8
**Dependencies:**
- D.1, D.2, D.3 (all SDK components complete)
**Parallel With:** None (final testing phase)
**Blocks:**
- Phase 2 completion (gates release)
**Success Criteria:**
- SDK parameter constraints validated (all 200+ params)
- Device communication reliability: 99.5% uptime
- 100+ parameter combinations tested
- User experience validated (intuitive controls)
- All 15 original patterns parameter-editable
- Performance: parameter change → device update < 1s
- No crashes under parameter edge cases
- Documentation validated (examples work)
**Test Strategy:**
- Parameter validation: all 200+ parameters tested
- Device communication: 1000+ transactions
- Constraint testing: min/max/invalid values
- User feedback: intuitive controls validated
- Stress testing: rapid parameter changes (100/sec)
- Regression: all original 15 patterns still work
- Documentation: all examples compile + run
**Related Context:** See .taskmaster/docs/appendices/agent_c_testing_context.md

---

## FIRMWARE OPTIMIZATION (WEEKS 3-10): STABILITY FOCUS

### Phase B.5: C++ Performance Hardening
**Assigned To:** Agent A (Firmware Security Engineer)
**Duration:** 20 hours
**Timeline:** Weeks 3-5
**Dependencies:** None (parallel with Phase B)
**Blocks:** None
**Success Criteria:**
- All 15 patterns optimized for C++
- Memory usage baseline (< 80KB total)
- CPU usage < 50% for demanding patterns
- Compile time < 5s per pattern
- Binary size < 2MB firmware
**Test Strategy:**
- Performance profiling: memory, CPU, execution time
- Stress testing: sustained performance
- Memory leak detection (valgrind)
- Optimization validation (before/after metrics)

### Phase B.6: WiFi Stability for OTA Updates
**Assigned To:** Agent A
**Duration:** 12 hours
**Timeline:** Weeks 5-6
**Dependencies:** None
**Blocks:** OTA update capability
**Success Criteria:**
- OTA update mechanism working
- Rollback capability if update fails
- WiFi connection stable during update
- Update verification (checksum validation)
- Progress reporting to user
**Test Strategy:**
- OTA update validation (10+ cycles)
- Rollback testing (intentional failures)
- WiFi stability during upload (1000+ iterations)
- Firmware integrity verification

### Phase B.7: Temperature & Power Management
**Assigned To:** Agent A
**Duration:** 8 hours
**Timeline:** Weeks 6-7
**Dependencies:** None
**Blocks:** Stability gate
**Success Criteria:**
- Device temperature stable under load
- Power management working (sleep states)
- Thermal throttling mechanisms
- Battery-efficient operation
**Test Strategy:**
- Sustained load testing (24h continuous)
- Temperature monitoring
- Power consumption measurement
- Thermal shutdown testing (safety)

---

## MINIMAL WEBAPP IMPROVEMENTS (WEEKS 3-8)

### Phase B.8: Device Connection UI
**Assigned To:** Agent D
**Duration:** 8 hours
**Timeline:** Weeks 3-4
**Dependencies:** None
**Blocks:** None
**Success Criteria:**
- Device discovery working
- WiFi connection setup flow
- Device status monitoring (online/offline)
- Connection error handling
- Manual IP entry option
**Test Strategy:**
- Device discovery: multiple devices
- Connection reliability: 99.5% uptime
- Error handling: graceful offline handling
- User experience: clear feedback

### Phase B.9: Pattern Library UI (No Changes)
**Assigned To:** Agent D
**Duration:** 0 hours (no changes needed)
**Timeline:** None
**Dependencies:** None
**Success Criteria:**
- Existing pattern UI works with parameters
- No major changes required
**Test Strategy:**
- Regression testing on existing UI

---

## TIMELINE SUMMARY: PATH B (10 WEEKS TO JAN 29)

```
Week 3-4 (Nov 14-27):   Phase B.1 (SDK design)
Week 4-6 (Nov 28-Dec 11): Phase B.2 (Parameter editor design)
Week 6-7 (Dec 12-25):   Phase B.3 (Webapp integration)
Week 7-8 (Dec 26-Jan 8): Phase B.4 (Integration testing)
Week 8-10 (Jan 9-29):   Stability hardening + release prep

SHIP DATE: January 29, 2026
```

---

## EFFORT COMPARISON: PATH A vs PATH B

| Phase | Path A (Graph) | Path B (SDK) | Difference |
|-------|---|---|---|
| Week 3-4 | Codegen (24h) | SDK Design (16h) | Path A 8h more |
| Week 4-6 | Pattern Migration (40h) | Parameter Editor (24h) | Path A 16h more |
| Week 6-7 | UI Integration (16h) | UI Integration (16h) | Same |
| Week 7-8 | Testing (16h) | Testing (16h) | Same |
| **Total** | **96h** | **72h** | **Path B 24h less** |
| **Other Work** | PF-5 parallel (360h) | Stability parallel (40h) | Path A 320h more |
| **Grand Total** | **~460h** | **~112h** | **Path A 348h more** |

---

## REVENUE PROJECTION: PATH B

**Path B: C++ SDK Approach**
- Target audience: Professional pattern programmers (developers, artists)
- Revenue model: SDK licensing + premium patterns
- Market size: $50-100M TAM (vs $100-150M for Path A)
- Adoption rate: Lower (requires C++ knowledge)
- Marketplace potential: Limited (hard-coded patterns only)
- Long-term growth: SDK extension library ecosystem

**Financial Impact:**
- Q1 Revenue: $5-10K (SDK launch, early adopters)
- Q2 Revenue: $20-40K (expanded adoption)
- Q3 Revenue: $50-80K (steady state)
- Annual: $75-150K (conservative)

---

## SUCCESS DEFINITION: PATH B

**Phase 2 Complete when:**
- ✅ SDK: Fully documented, API stable, 5+ examples work
- ✅ Parameter Editor: All 200+ parameters functional, intuitive
- ✅ Webapp Integration: Parameter editing working perfectly
- ✅ Firmware: Stable, optimized, 24h run zero crashes
- ✅ All 15 original patterns: Parameter-editable, working perfectly
- ✅ Device Communication: 99.5% reliable, < 1s update latency
- ✅ Quality: 95%+ test coverage, WCAG AA compliant
- ✅ Documentation: Complete, examples validated
- ✅ Ship date: January 29, 2026 achieved

---

## RISK ANALYSIS: PATH B

| Risk | Severity | Mitigation |
|------|----------|-----------|
| Lower market potential | LOW | Still $50-100M TAM, strong dev community |
| Slower user adoption | MEDIUM | Focus on early adopter community (artists, devs) |
| Maintenance burden | MEDIUM | SDK stability critical; version management essential |
| Feature parity with Path A | HIGH | Accept trade-off; SDK valuable on its own |
| Team morale | LOW | Clear messaging: Path B is strategic pivot, not failure |

---

**Document Status:** CONDITIONAL (parse if Graph PoC fails)
**Last Updated:** 2025-11-05
**Rationale:** Provides safe, proven alternative if Graph System approach encounters technical challenges
